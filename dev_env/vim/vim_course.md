# Vim

[coolen vim 재생목록 - youtube](https://www.youtube.com/watch?v=aAxP1TnnCso&list=PLfXO7j_Cgtld0Vqf1EVsgpE58JbqnDs33)

## 파일에서 커서, 화면 이동 (Vim2)

- `Ctrl e` : 화면을 아래로 이동
- `Ctrl y` : 화면을 위로 이동

- `Ctrl f` : 아래로 페이지 단위로 이동 (forword)
- `ctrl b` : 위로 페이지 단위로 이동 (backword)

- `Ctrl u` : 반 페이지 단위로 위로 이동 (up)
- `Ctrl d` : 반 페이지 단위로 아래로 이동 (down)

* `gg` : 맨 처음으로 커서 이동
* `G` : 맨 마지막으로 커서 이동

* `10G or 10gg` : 10번째 줄로 커서 이동

## 편집의 기초 (Vim3)

글자를 삽입, 추가가 가능

- `I` : 맨 앞으로 가서 삽입모드
- `A` : 맨 뒤로 가서 삽입모드

vim 에서는 명령의 단위가 있다.

**편집 단위** : 입력 모드로 들어가서 특정 글자를 입력(편집)을 하고 escape 까지. (i....ESC)

`u` : 삽입을 했었던 **편집 단위별로** undo

## 반복 명령 (Vim4)

명령 단위가 존재한다. (다른 에디터와는 다르게 vim 만의 특성)

명령 단위를 효과적으로 사용할 수 있는 방법을 알아보자.

- `.`: 마지막 명령 단위를 반복한다.

**vim 은 어떤 파일에 명령을 내리는 형태로 편집을 한다고 생각하면 많은 일들을 vim 스럽게 처리를 할 수 있게 된다**.

## 콜론(:)으로 시작하는 command line 모드 (Vim 5)

command line 모드는 `:` 을 통해 시작을 한다.

`:sav 파일이름` or `:w 파일이름` 을 통해 다른 파일 이름으로 저장할 수 있다. 이 둘의 차이점은 다음과 같다. `:w 파일이름` 은 새로운 파일을 저장하고 이전 파일에서 작업을 진행하지만 `:sav 파일이름` 은 새로운 파일을 저장하고 새로운 파일에서 작업을 진행한다. (sav 의 full command는 saveas 이다)

- `Ctrl D` 를 통해 입력할 수 있는 command 가 무엇이 있는지 볼 수 있다.

## 한 줄 삭제, 단어 삭제 (dd dw dW) (Vim 6)

일반 모드에서 다룰 수 있는 몇 가지 명령(한줄 삭제, 단어 삭제)에 대해 알아보자.

- `dd` : 한 줄 삭제

- `dw` : 현재 커서 위치에서부터 단어 끝까지 삭제 (word)

- `dW` : 현재 커서 위치에서부터 다음 공백까지 삭제

삭제를 하는 데 있어서 명령을 정교하게 내릴 수 있다. 왜 이렇게 할까? 긴 명령, 복잡한 명령을 하나의 단어(ex. `dd`, `dw`, `dW`)로 줄이고 그 단어로 명령을 내림으로써 의도를 전달하기가 쉽다. vim 은 명령어를 기반으로 대화를 하는 것과 같다라고 생각하면 될 것 같다.

`u` : 삽입을 했었던 **편집 단위별로** undo
`U`: 해당 라인의 편집 시작과 끝에 일어난 명령들을 undo 한다.

## 블럭설정하기 (Vim 7)

- `v` 를 누르고(visual mode) 원하는만큼 블럭을 하고 `d` 를 누르면 삭제된다.
- `V` 는 라인 단위로 블럭을 설정.
- `Ctrl v` 세로로 블럭을 지정할 수 있다.

## 간단한 편집 replace, change, one-more (Vim 8)

- `r` : 현재 커서의 글자가 입력되는 글자로 수정된다.
- `R` : 현재 커서의 글자로부터 입력되는 글자로 모두 수정된다.
- `cc` : 라인 삭제 후 입력모드
- `C` : 커서 이후를 삭제후 입력모드
- `cw` : 공백, 기호 전까지 단어 삭제후 입력모드
- `cW` : 공백 전까지 단어 삭제 후 입력모드
- `o` : 다음 줄에 한 줄 추가 후 입력모드
- `O` : 현재 줄에 한 줄 추가 후 입력모드

## 복사 붙이기, 삭제 후 붙이기, 레지스터 (Vim 9)

vim 에는 클립보드 역할을 하는 **레지스터**라는 개념이 있다.

- `P` : 현재 라인에 붙여넣기
- `p` : 다음 라인에 붙여넣기

- `dd` : 삭제 (Delete to "1 레지스터)
- `yy` : 복사 (Yank to "0 레지스터)

## 작업파일 전환, 디렉토리 열기 (Vim 10)

- `vim .` : 현재 디렉토리의 내용을 볼 수 있음
- `:e .` : 현재 디렉토리의 내용을 볼 수 있음
- `:e {파일이름} or {디레토리명}` : 지정한 파일이름을 열어 편집하거나 해당 디렉토리의 내용을 볼 수 있다.
- `Ctrl l` : 화면다시 그리기
- `Ctrl g` : 작업중인 파일명 확인하기

## 창을 분할하여 편집하기 기초편 (Vim 11)

- `:sp` : 창나누기
- `Ctrl-w w` : 두 번 누르면 창을 순환하며 이동
- `Ctrl-w j` : 윗 창으로 이동
- `Ctrl-w k` : 아래 창으로 이동
- `Ctrl-w c` : 창 닫기
- `:sp {파일명}` : {파일}을 열기

## 창분할, 창 크기 조정하기 (Vim 12)

- `Ctrl-w _` : 분할 윈도우 확장
- `Ctrl-w =` : 분할 윈도우 창 같은크기로 재조정
- `:vsp` : 세로 분할
- `Ctrl-w |` : 세로 분할 윈도우 확장
- `Ctrl-w h` : 왼쪽창으로 이동
- `Ctrl-w l` : 오른쪽창으로 이동
- `ZZ` : 현재 창 종료

## 파일 비교하기 vimdiff (Vim 13)

- `vimdiff {파일1} {파일2}` : 파일1 과 파일2를 비교, hodling 되어있는데 이를 해제하고 싶으면 맨 상단에 `+` 에서(접는선위에서) `l` 를 누르면된다.

- `dp` : 다른 창으로 diff 내용 보내기
- `do` : 다른 창에서 diff 내용 가져오기

## Explore, Split explore (Vim 14)

현재 작업중인 디렉토리에서 파일을 여는 또 다른 방법 2가지를 알아보자.

- `:Ex` (Explore) : 현재 파일이 속해있는 디렉토리에서 다른 파일을 보고 싶을 때 사용.
- `:Se` (Sexplore) : split explore, 현재 파일을 닫지 않고 현재 파일이 속해있는 디렉토리에서 다른 파일을 보고 싶을 때 사용.

## 디렉토리 명령어 RDdo (Vim15)

현재 디렉토리를 보는 화면에서 파일 이름을 변경하거나, 지우거나, 서브 디렉토리를 만들어보자.

- `R` : 이름 바꾸기
- `D` : 파일 삭제
- `d` : 새로운 서브 디렉토리
- `-` : 상위 디렉토리로 이동
- `o` : 창을 나누고 파일을 연다(split open)
- `Ctrl-w o` : 윈도우 하나(one)만 남기고 나머지 close

## 찾기, 단어찾기 (Vim 16)

- `/` : 파일내 문자열 찾기
- `*`, `#`: 해당 커서의 단어를 검색하기
- `#` 은 앞에 `?`가 붙는데 `?`은 역방향으로 검색한다. 그래서 `n` 을 누르면 아래로 찾지않고 위로 찾는다.
- `n`, `N`: 계속찾기, 뒤로찾기
- `?` : 역방향으로 문자열 찾기

## man page, pydoc 확인하기 (Vim 17)

코딩 중에 C, python 함수에 대한 설명을 알아보고 싶을 때 사용하는 팁을 알아보자.

- `shif k`

## 커서 밑 파일 열기 (Vim 18)

작업 중인 파일안에서 참조하는 다른 파일 여는 방법에 대한 간단한 명령을 알아보자.

`Ctrl-w f` : 작업 중인 파일안에서 참조하는 다른 파일을 오픈한다.

`NAME=/some/path/file.txt` 의 형식에서 `=` 을 파일명으로 인식하지 않게 하려면 `:set isfname-==` 하거나 `.vimrc` 에 `set isfname-==` 을 작성하면된다.

## 버퍼 이용하기 (Vim 19) [고급과정의 시작]

`:sp` 는 파일 하나를 두 개의 뷰로 접근하는 방법이다. `:sp {파일이름}` 으로 다른 파일을 넣어주면 두 개의 파일을 다루게 된다.

차례로 `:sp`, `:sp {파일이름}` 로 실습하면 창은 3개이지만 두 개의 파일을 다루고 있다. 이것은 vim 이 다루고 있는 버퍼가 2개라는 의미이다. 이때 버퍼에 어떤 것들이 들어있는지 볼려면 `:ls`, `:files`, `:buffers` 명령을 통해 볼 수 있다.

`:ls` 명령을 통해 버퍼의 내용을 확인하면

```
  1 #    "test.md"                      line 1
  4 %a   "testtest.txt"                 line 13
```

와 같은 내용이 나오는데 현재 버퍼는 앞에 `%` 가 붙는다. 바로 직전에 열었던 버퍼에는 `#` 이 붙는다. `a` 는 active 하다는 의미로 메모리에 올라와있는지 여부를 나타낸다.

`:sb{buffer number}` 명령어를 통해 버퍼 번호에 해당하는 버퍼를 연다 (split buffer). `:sba` 는 버퍼에 있는 파일들을 모두 열어준다 (all).

`:ls` 는 list만 가능한 버퍼들을 보여준다. `:ls!` 명령은 unlist 버퍼들도 같이 보여준다.

## 버퍼 이용하기 2 (Vim 20)

- `Ctrl ^` : 직전에 열었던(`#`이 붙은 버퍼) 버퍼를 연다.

- `{buffer number} Ctrl ^` : 버퍼 번호에 해당하는 버퍼를 연다.

## 레지스터 (Vim 21)

윈도우에서는 클립보드라는 것을 가지고 복사 붙여넣기 같은 것들이 구현이 된다. vim 에서도 이와 비슷한 기능들을 레지스터가 해준다.

- `:registers` or `:reg` : 레지스터를 볼 수 있다.

레지스터 중에 `""` 는 레지스터라기 보다는 마지막에 사용한 레지스터를 가르키는 심볼릭 링크와 같은 녀석이다.
`"0` 은 복사, `"1` 은 삭제를 할 때 사용하는 레지스터이다. 만약에 `p` 명령을 사용할 떄 `"0`, `"1` 와 같은 레지스터를 따로 지정해주지않으면 `""` 라는 default 레지스터를 사용한다. 지정하여 사용하고 싶으면 `"3p` 와 같이 앞에 레지스터를 적어주면된다.

삭제를 계속하면 `"1` 에 있던 것은 `"2` 으로 가면서 계속 시프트된다.

현재 파일을 종료하고 다시 열어서 레지스터를 확인해보면 그대로인 것을 볼 수 있다. vim가 종료되어도 똑같이 나으는 이유는 `~/.viminfo` 때문이다. `.viminfo` 파일을 보면 레지스터 내용들이 저장되어있다. vim가 종료되면 현재 상황의 레지스터, 각종 환경변수들을 `.viminfo` 에 저장을 하고 다시 실행을 할 때는 이 값들을 읽어와서 레지스터의 초기값을 설정하게 된다.

- `:wv` : 레지스터 내용을 강제로 파일(.viminfo)에 저장
- `:rv` : 레지스터 내용을 강제로 파일에서 읽음

이 두 명령을 응용하여 vim 창을 종료하지않고 다른 vim창과 복사 붙여넣기가 가능해진다.

## 사용자 레지스터 (Vim 22)

다른 레지스터들도 알아보자.

- `":` : 최근에 사용한 명령
- `"%` : 현재 작업중인 파일명

알파벳으로 된 사용자 레지스터들도 있다. 예를 들어 다음과 같이 사용할 수 있다. `"ky` 와 같이 사용하면 `k` 레지스터에 내용을 넣는다 (`y` 대신 `dd` 를 사용하면 잘라내기처럼 사용할 수 있다). 대문자 `K` 로 사용하면 k 레지스터에 내용을 덮어씌우지않고 이어서 추가한다.

## 전문가라면 블럭설정 및 일괄 수정으로!! (Vim 23)

블럭 설정하여 일괄 수정하기,
블럭 설정하여 일괄 삽입, 삭제

visual mode c 명령으로 일괄 수정.
visual mode A, I 명령으로 앞 뒷 부분에 일괄 삽입.

gv 명령을 이용하여 마지막 블럭 설정을 계속 사용하여 편집.

'o' 를 이용하여 블럭의 앞/뒷 부분 선택영역을 조정.

## 탭 사이즈를 바꾸고 싶습니다 (Vim 24)

## 파일마다 다른 탭 설정: modeline (Vim 25)

## 탭과 스페이스 자세히 보기 (Vim 26)

## 자동 줄 나누기 gww (Vim 27)

- `{`, `}` : 문단 이동
- `shift j` : 행 결합
- `:set noai nosi nocin` : 들여쓰기 끄기
- `:set textwidth=75` or `:set tw=75` : 행의 폭 조절
- `gww` : (커서 위치를 바꾸지 않고) 행의 폭에 따라 나누기(정렬)
- `gqq` : (커서 맨 라인의 끝으로 이동) 행의 폭에 따라 나누기(정렬)
- `gj`, `gk` : 한 행이 여러줄로 보일때 위아래 이동
- `:set nowrap`, `:set wrap` : 한 행이 여러줄로 보이게 / 안보이게
- `:left`, `:right`, `:center` : 좌측, 중앙, 우측 정렬
- `gv` : 블럭설정 원상복귀

## 숫자 증가, 감소, 가속 증가 (Vim 28)

- `ctrl a` : 커서 및 숫자 1 증가
- `ctrl x` : 커서 및 숫자 1 감소
- `100 ctrl a` : 커서 및 숫자 100 증가
- `g ctrl a` : 라인별로 숫자 1 증가
- `100 g ctrl a` : 라인별로 숫자 100 증가

## 반복 명령 (Vim 29)

크기가 작은 로그 파일에 유용.

- `:g/re/p` : 특정 패턴이 나타나는 라인을 모두 출력
  - `g` 라는 의미는 global, `re`는 정규표현식, `p` 는 print
  - `:g/404/p` : 404 가 들어가있는 라인을 모두 출력
  - `p`는 디폴트이기 때문에 `g/re/` 만 해도 된다.
- `g/re/d` : 특정 패턴이 나타나는 라인을 모두 삭제
- `g/re/y` : 특정 패턴이 나타나는 라인을 모두 복사
- `g!/re/d` : 패턴이 나타나지 않는 행을 대상으로 명령 수행

## 바꾸기 (Vim 30)

- `:%s/re/new/g` : 모든행(%)에서 바꾸기(s)를 수행하자, 패턴(re)이 보이면 새로운 문자열(new)로 변경하는데, 각 행에서 발견되는 모든(g) 패턴에 대해 변경한다.

- `:%s/re/new/gc` : 바꿀 때 컨펌(c)을 받고 진행한다.

`%` 대신 `1,5` 처럼 라인 범위를 지정할 수 있다.