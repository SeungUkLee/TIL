# Javascript Scope

Scope(유효범위)이란? 변수에 접근성과 생존기간(life-cycle)을 의미. 변수가 가지고 있는 참조 범위를 의미.

자바스크립트의 Scope 종류는 **전역 Scope(Global Scope)** , **지역 Scope(Local Scope or Function -evel Scope)** 가 있다.
- 전역 Scope : 코드 어디에서든지 참조 가능.
- 지역 Scope : 정의된 함수 내에서만 참조.

변수는 선언 위치에 따라 Scope을 가지게 된다. 즉 전역에서 선언된 변수는 전역 Scope를 갖는 **전역 변수**, 지역에서 선언된 변수는 지역 Scope를 갖는 **지역 변수**.

자바 스크립트는 다른 언어와 다르게 함수 코드 블록내에서 선언된 변수는 함수 코드 블럭 내에서만 유효한 **function-level scope** 를 사용한다.
> 단, ES6에 추가된 `let` 키워드를 사용하면 **block-level scope**를 따른다.

## Global Scope
전역 변수는 전역 객체(Global Object) `window`의 프로퍼티이다.

자바스크립트는 타 언어와는 달리 특별한 시작점이 없어 글로벌 영역에 변수나 함수를 선언하기 쉽다. 이는 전역 변수를 남발하게 하는 문제를 야기시킨다. 전역 변수의 사용이 많아지면 변수명의 중복 등 여러 문제를 발생시키므로 가급적 사용을 억제해야한다.

## Function-level scope
자바스크립트는 function-level scope를 따르기 때문에 함수 내에서 선언된 매개변수와 변수는 함수 외부에서는 유요하지 않다.
만약 함수 내 지역변수를 참조하려고 할 때 전역변수와 지역변수의 변수명이 중복된 경우, 지역변수를 우선하여 참조한다.

## 변수명의 중복
2개의 파일로 분리된 자바스크립트 코드가 있다고 가정하자.

```js
// x.js
function foo() {
    var i = 0
}

// y.js
for (var i = 0; i < 10; i++) {
    foo()
    console.log(i)
}
```
두 파일을 HTML에서 로드하여 사용하면 변수 i는 중복된다. 이때 자바스크립트는 변수명의 중복을 허용하여 에러 메서지도 발생하지 않아 큰 문제가 될 수 있다. 따라서 전역변수를 반드시 사용하여야 할 이유를 찾지 못한다면 지역변수를 사용해야한다. 변수의 범위인 스코프는 좁을수록 좋다!!

> **즉지 실행 함수(IIFE)** 를 사용하여 전역변수 사용을 억제할 수 있다. 라이브러리 등에 자주 사용된다.